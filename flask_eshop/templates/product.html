{% extends "base.html" %}

{% block title %}{{ product.name }} - eShop{% endblock %}

{% block content %}


<div class="product-page">
    <div class="product-breadcrumb">
        <a href="{{ url_for('home') }}" class="breadcrumb-link">
            <i class="fas fa-home"></i> Home
        </a>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-current">{{ product.name }}</span>
    </div>

    <div class="product-layout">
        <!-- Product Images -->
        <div class="product-gallery">
            <div class="main-image-container">
                <img src="{{ get_image_url(product.image_url) }}" 
                     alt="{{ product.name }}" 
                     class="main-product-image"
                     id="mainProductImage">
            </div>
        </div>

        <!-- Product Info -->
        <div class="product-details">
            <div class="product-header">
                <h1 class="product-title">{{ product.name }}</h1>
                <div class="product-rating">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <span class="rating-text">(4.5 â€¢ 128 reviews)</span>
                </div>
            </div>

            <div class="product-pricing">
                <div class="current-price">${{ "%.2f"|format(product.price) }}</div>
            </div>

            <div class="product-meta">
                <div class="meta-item">
                    <i class="fas fa-tag"></i>
                    <span class="meta-label">Category:</span>
                    <span class="meta-value">{{ product.category or 'General' }}</span>
                </div>
                
                {% if product.stock_quantity > 0 %}
                    <div class="stock-available">
                        <i class="fas fa-check-circle"></i>
                        <span class="stock-text">In Stock</span>
                        <span class="stock-quantity">({{ product.stock_quantity }} available)</span>
                    </div>
                {% else %}
                    <div class="stock-unavailable">
                        <i class="fas fa-times-circle"></i>
                        <span class="stock-text">Out of Stock</span>
                    </div>
                {% endif %}
                
            </div>

            

            <div class="product-description">
                <h3>Description</h3>
                <p>{{ product.description or 'No description available for this product.' }}</p>
            </div>

            {% if product.stock_quantity > 0 %}
            <div class="purchase-section">
                <form action="{{ url_for('add_to_cart') }}" method="post" class="add-to-cart-form">
                    <input type="hidden" name="product_id" value="{{ product.product_id }}">
                    
                    <div class="quantity-selector">
                        <label for="quantity">Quantity:</label>
                        <div class="quantity-controls">
                            <button type="button" class="quantity-btn" onclick="decreaseQuantity()">
                                <i class="fas fa-minus"></i>
                            </button>
                            <input type="number" id="quantity" name="quantity" 
                                   value="1" min="1" max="{{ product.stock_quantity }}" 
                                   class="quantity-input">
                            <button type="button" class="quantity-btn" onclick="increaseQuantity()">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button type="submit" class="btn btn-primary btn-add-to-cart">
                            <i class="fas fa-shopping-cart"></i>
                            Add to Cart
                        </button>
                        <button type="button" class="btn btn-secondary btn-wishlist">
                            <i class="fas fa-heart"></i>
                            Wishlist
                        </button>
                    </div>
                </form>
            </div>
            {% else %}
            <div class="out-of-stock-section">
                <div class="out-of-stock-message">
                    <i class="fas fa-bell"></i>
                    <span>This product is currently out of stock</span>
                </div>
                <button class="btn btn-outline notify-btn">
                    <i class="fas fa-envelope"></i>
                    Notify When Available
                </button>
            </div>
            {% endif %}

            <div class="product-features">
                <div class="feature">
                    <i class="fas fa-shipping-fast"></i>
                    <span>Free shipping on orders over $50</span>
                </div>
                <div class="feature">
                    <i class="fas fa-undo"></i>
                    <span>30-day return policy</span>
                </div>
                <div class="feature">
                    <i class="fas fa-shield-alt"></i>
                    <span>2-year warranty included</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Tabs -->
    <div class="product-tabs">
        <div class="tabs-header">
            <button class="tab-btn active" data-tab="description">Description</button>
            <button class="tab-btn" data-tab="specifications">Specifications</button>
            <button class="tab-btn" data-tab="reviews">Reviews</button>
            <button class="tab-btn" data-tab="shipping">Shipping & Returns</button>
        </div>
        
        <div class="tabs-content">
            <div class="tab-pane active" id="description">
                <h3>Product Details</h3>
                <p>{{ product.description or 'Detailed product description coming soon.' }}</p>
            </div>
            
            <div class="tab-pane" id="specifications">
                <h3>Technical Specifications</h3>
                <div class="specs-grid">
                    <div class="spec-item">
                        <span class="spec-label">Category</span>
                        <span class="spec-value">{{ product.category or 'General' }}</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label">SKU</span>
                        <span class="spec-value">#{{ product.product_id }}</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label">In Stock</span>
                        <span class="spec-value">{{ product.stock_quantity }} units</span>
                    </div>
                </div>
            </div>
            
            <div class="tab-pane" id="reviews">
                <h3>Customer Reviews</h3>
                <div class="reviews-placeholder">
                    <i class="fas fa-comments"></i>
                    <p>No reviews yet. Be the first to review this product!</p>
                    <button class="btn btn-primary">Write a Review</button>
                </div>
            </div>
            
            <div class="tab-pane" id="shipping">
                <h3>Shipping & Return Policy</h3>
                <div class="shipping-info">
                    <h4>Shipping</h4>
                    <ul>
                        <li>Free standard shipping on orders over $50</li>
                        <li>Express shipping available for $9.99</li>
                        <li>Usually ships within 1-2 business days</li>
                    </ul>
                    
                    <h4>Returns</h4>
                    <ul>
                        <li>30-day money-back guarantee</li>
                        <li>Free returns for unused items</li>
                        <li>Return shipping paid by customer</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

{% block scripts %}
<script src="{{ url_for('static', filename='js/products.js') }}"></script>
{% endblock %}

{% endblock %}